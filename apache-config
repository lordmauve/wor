<VirtualHost *:80>
	ServerAdmin webmaster@worldofrodney.org
	ServerName game.worldofrodney.org
	ServerAlias www.worldofrodney.org
	ServerAlias test.worldofrodney.org

	PythonDebug On
	
	# First, map the file paths to the server root
	DocumentRoot /home/wor/server_root
	<Directory />
		Options FollowSymLinks
		AllowOverride None
	</Directory>

	PythonAutoReload On
	PythonOption wor.root_path /home/wor
	PythonPath "sys.path + ['/home/wor/library', '/home/wor/handlers', '/home/wor/content']"

	<Location />
		AuthType Digest
		AuthName WoR
		AuthDigestDomain http://test.worldofrodney.org/ http://game.worldofrodney.org/ http://www.worldofrodney.org/ http://worldofrodney.org/
		AuthDigestProvider file
		AuthUserFile /home/wor/authn_file
		Require valid-user
	</Location>

	# Now map the REST API to a suitable set of paths:
	<Location /api>
		Order deny,allow
		Allow from all

		SetHandler mod_python
		PythonHandler hd_all::api_handler
	</Location>
	<Location /img/terrain>
		Order deny,allow
		Allow from all
		SetHandler mod_python
		PythonHandler hd_image::image_handler
	</Location>

	LogLevel warn
	ErrorLog /var/log/apache2/wor.error.log
	CustomLog /var/log/apache2/wor.access.log combined
</VirtualHost>

# In the release version, this should be 443
<VirtualHost *:80>
	ServerAdmin webmaster@worldofrodney.org
	ServerName login.worldofrodney.org
	ServerAlias login.test.worldofrodney.org

	PythonDebug On

	DocumentRoot /home/wor/login_root
	<Directory />
		Options FollowSymlinks
		AllowOverride None
		Order deny,allow
		Allow from all
	</Directory>

	PythonAutoReload On
	PythonOption wor.root_path /home/wor
	PythonOption mod_python.session.session_type FileSession
	PythonPath "sys.path + ['/home/wor/handlers']"

	<Location /verify>
		SetHandler mod_python
		PythonHandler hd_authn::verify
	</Location>
	<Location /process>
		SetHandler mod_python
		PythonHandler hd_authn::process
	</Location>
</VirtualHost>
